# Entity Pattern: Facility Lookup and Filtering
# Discovered: Phase 1A - TBox Entity Patterns
# Complexity: GREEN

name: facility_entity_patterns
complexity: GREEN
description: Entity lookup and filtering patterns for Facility class

ontology_bindings:
  class: Facility
  table: facilities
  identifier: facility_code

patterns:
  - name: facility_by_code
    description: "Lookup facility by unique code"
    applicability:
      keywords: [facility, find, lookup, code, FAC, warehouse, factory, distribution]
      intent: "Find a specific facility by its code"
    parameters:
      - name: facility_code
        type: string
        required: true
        example: "FAC-CHI"
    sql_template: |
      SELECT id, facility_code, name, facility_type,
             city, state, country, capacity_units, is_active
      FROM facilities
      WHERE facility_code = {{facility_code}}
    execution:
      time_ms: 0.7
      rows: 1
    named_entities:
      - "FAC-CHI (Chicago Warehouse)"
      - "FAC-LA (LA Distribution Center)"
      - "FAC-NYC (New York Factory)"
      - "FAC-MUN (Munich Factory)"

  - name: facilities_by_type
    description: "List facilities filtered by type"
    applicability:
      keywords: [facilities, type, warehouse, factory, distribution center]
      intent: "Find all facilities of a specific type"
    parameters:
      - name: facility_type
        type: string
        required: true
        values: [warehouse, factory, distribution_center]
    sql_template: |
      SELECT id, facility_code, name, city, country, capacity_units
      FROM facilities
      WHERE facility_type = {{facility_type}}
      ORDER BY name
    execution:
      time_ms: 0.4
      result: "factory: 22, distribution_center: 18, warehouse: 10"

  - name: facilities_by_country
    description: "List facilities filtered by country"
    applicability:
      keywords: [facilities, country, location, region]
      intent: "Find all facilities in a specific country"
    parameters:
      - name: country
        type: string
        required: true
    sql_template: |
      SELECT id, facility_code, name, facility_type, city, capacity_units
      FROM facilities
      WHERE country = {{country}}
      ORDER BY facility_type, name
    execution:
      time_ms: 0.3
      result: "USA: 16, Japan: 12, China: 8, Germany: 7, Canada: 4"

  - name: facility_capacity_by_type
    description: "Total capacity by facility type"
    applicability:
      keywords: [capacity, facilities, type, total, aggregate]
      intent: "Get total capacity by facility type"
    parameters: []
    sql_template: |
      SELECT facility_type, SUM(capacity_units) as total_capacity
      FROM facilities
      GROUP BY facility_type
      ORDER BY total_capacity DESC
    execution:
      time_ms: 0.9
      result: "factory: 1,245,581, distribution_center: 1,070,044, warehouse: 455,750"
