# Pattern: Supply Chain Depth Measurement
# Discovered during Phase 3 implementation
discovered: "2024-12-04"
query: "What is the depth of the supply chain from Acme Corp?"
category: n-hop-recursive
route: YELLOW

# Handler approach
handler_used: traverse
handler_params:
  nodes_table: suppliers
  edges_table: supplier_relationships
  edge_from_col: seller_id
  edge_to_col: buyer_id
  start_id: 42  # Acme Corp (tier 1)
  direction: inbound  # upstream
  max_depth: 20  # High limit to find true depth
  include_start: true

# Key output
depth_metric: depth_reached
path_analysis: paths  # Shows full paths to each node

# Ontology bindings
ontology_bindings:
  relationship: supplies_to
  business_rule: "Tier structure: T3 -> T2 -> T1 -> us"

result_correct: true
execution_time_ms: 75

notes: |
  The depth_reached field in traverse output gives the
  maximum depth encountered during traversal.

  For supply chain analysis:
  - depth_reached shows supply chain layers
  - paths dict shows specific supply chains to each supplier
  - Can calculate average path length from paths

  Example insight: "Acme Corp has 3 tiers of upstream suppliers"
  means they have tier 2, tier 3, and possibly tier 4 suppliers.

  For risk assessment, longer chains = more fragility points.
