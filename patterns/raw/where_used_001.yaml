# Pattern: Where-Used Analysis (Reverse BOM)
# Discovered during Phase 3 implementation
discovered: "2024-12-04"
query: "What assemblies use part X?"
category: bom-traversal
route: YELLOW

# Handler approach
handler_used: traverse
handler_params:
  nodes_table: parts
  edges_table: bill_of_materials
  edge_from_col: child_part_id   # Start from child
  edge_to_col: parent_part_id     # Follow to parents
  start_id: 123                   # Part ID to trace
  direction: outbound             # child -> parents
  max_depth: 10
  include_start: false            # Don't include the starting part

# Ontology bindings
ontology_bindings:
  relationship: component_of
  node_class: Part
  direction_semantic: "part is used in assemblies"
  # component_of: child is component_of parent
  # We traverse child->parent to find where part is used

result_correct: true
execution_time_ms: 85

notes: |
  Reverse of BOM explosion - starts from a component and finds
  all assemblies/products that use it.

  This is critical for impact analysis:
  - "If part X fails, what products are affected?"
  - "Change impact for part modification"

  The traversal returns all ancestor parts up to top-level assemblies.
  To find affected products, join with product_components table.
